{"title":"å‰ç«¯ç°ä»£æ¨¡å—åŒ–æœºåˆ¶","date":"2021-12-26T17:50:21.000Z","date_formatted":{"ll":"Dec 27, 2021","L":"12/27/2021","MM-DD":"12-27"},"link":"2021/12/27/engineering-1","tags":["FE"],"updated":"2022-01-03T15:39:15.838Z","content":"<p>æ¨¡å—åŒ–çš„å¥½å¤„ï¼š</p>\n<ol>\n<li>é¿å…å‘½åå†²çª</li>\n<li>ä»£ç ç»“æ„åˆ†ç¦»ï¼Œé«˜å¯ç»´æŠ¤æ€§ã€é«˜å¯å¤ç”¨æ€§</li>\n<li>æŒ‰éœ€åŠ è½½</li>\n</ol>\n<h2 id=\"å‰ç«¯æ¨¡å—åŒ–çš„æ¼”å˜\">å‰ç«¯æ¨¡å—åŒ–çš„æ¼”å˜<a title=\"#å‰ç«¯æ¨¡å—åŒ–çš„æ¼”å˜\" href=\"#å‰ç«¯æ¨¡å—åŒ–çš„æ¼”å˜\"></a></h2>\n<hr>\n<p>function æ¨¡å¼ -&gt; å‘½åç©ºé—´ï¼ˆnamespaceï¼‰ -&gt; è‡ªæ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰ -&gt; IIFE å¢å¼º -&gt; CommonJSã€AMDã€CMDã€ES6 æ¨¡å—åŒ–</p>\n<h3 id=\"1.-å…¨å±€çš„-function-æ¨¡å¼\">1. å…¨å±€çš„ function æ¨¡å¼<a title=\"#1.-å…¨å±€çš„-function-æ¨¡å¼\" href=\"#1.-å…¨å±€çš„-function-æ¨¡å¼\"></a></h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// do something â€¦</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// do something â€¦</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åˆ©ç”¨äº†å‡½æ•°ä½œç”¨åŸŸçš„ç‰¹æ€§æ¥åˆ†å‰²å˜é‡å’Œå®ç°ä¸åŒçš„åŠŸèƒ½</p>\n<p><strong>ç¼ºç‚¹ï¼š</strong> å‡½æ•°éƒ½å£°æ˜åœ¨äº†å…¨å±€ç¯å¢ƒä¸‹ï¼Œæ±¡æŸ“å…¨å±€å˜é‡</p>\n<h3 id=\"2.-å‘½åç©ºé—´ï¼ˆnamespaceï¼‰æ¨¡å¼\">2. å‘½åç©ºé—´ï¼ˆnamespaceï¼‰æ¨¡å¼<a title=\"#2.-å‘½åç©ºé—´ï¼ˆnamespaceï¼‰æ¨¡å¼\" href=\"#2.-å‘½åç©ºé—´ï¼ˆnamespaceï¼‰æ¨¡å¼\"></a></h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"built_in\">module</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">data</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">  <span class=\"attr\">sayName</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello, &quot;</span> + name);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">add</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">num1, num2</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> num1 + num2;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.data = <span class=\"number\">2</span>; <span class=\"comment\">// ä¿®æ”¹äº† module ä¸­çš„æ•°æ®</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.sayName(<span class=\"string\">&quot;noko&quot;</span>);</span><br></pre></td></tr></table></figure>\n<p>å°†å˜é‡å’Œå‡½æ•°ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œæ•´åˆèµ·æ¥çš„å¯¹è±¡å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œ</p>\n<p><strong>ç¼ºç‚¹ï¼š</strong> æ•°æ®ä¸å®‰å…¨ï¼Œå®¹æ˜“ç¯¡æ”¹æ¨¡å—å¯¹è±¡ä¸­çš„æ•°æ®å’Œæ–¹æ³•</p>\n<h3 id=\"3.-è‡ªæ‰§è¡Œå‡½æ•°ï¼ˆiifeï¼‰å’Œé—­åŒ…\">3. è‡ªæ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰å’Œé—­åŒ…<a title=\"#3.-è‡ªæ‰§è¡Œå‡½æ•°ï¼ˆiifeï¼‰å’Œé—­åŒ…\" href=\"#3.-è‡ªæ‰§è¡Œå‡½æ•°ï¼ˆiifeï¼‰å’Œé—­åŒ…\"></a></h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">;(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"><span class=\"built_in\">window</span></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> data = <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> setData = <span class=\"function\">(<span class=\"params\">newData</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    data = newData</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> getData = <span class=\"function\">() =&gt;</span> <span class=\"built_in\">console</span>.log(data)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">window</span>.module = &#123;</span><br><span class=\"line\">    setData,</span><br><span class=\"line\">    getData</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;)(<span class=\"built_in\">window</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.getData() <span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.setData(<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"built_in\">module</span>.getData() <span class=\"comment\">// 2</span></span><br></pre></td></tr></table></figure>\n<p>æ•°æ®ç§æœ‰åŒ–ï¼Œå¤–éƒ¨åªèƒ½é€šè¿‡æš´éœ²çš„æ–¹æ³•è·å–å’Œä¿®æ”¹</p>\n<p><strong>ç¼ºç‚¹ï¼š</strong> æ²¡æœ‰å¼•å…¥ä¾èµ–çš„æœºåˆ¶</p>\n<h3 id=\"4.-iife-å¢å¼ºç‰ˆ-â€”â€”-ç°ä»£æ¨¡å—åŒ–çš„åŸºç¡€\">4. IIFE å¢å¼ºç‰ˆ â€”â€” ç°ä»£æ¨¡å—åŒ–çš„åŸºç¡€<a title=\"#4.-iife-å¢å¼ºç‰ˆ-â€”â€”-ç°ä»£æ¨¡å—åŒ–çš„åŸºç¡€\" href=\"#4.-iife-å¢å¼ºç‰ˆ-â€”â€”-ç°ä»£æ¨¡å—åŒ–çš„åŸºç¡€\"></a></h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">;(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"><span class=\"built_in\">window</span>, $</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> data = <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> setData = <span class=\"function\">(<span class=\"params\">newData</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    data = newData</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> getData = <span class=\"function\">() =&gt;</span> <span class=\"built_in\">console</span>.log(data)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> changeColor = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    $(<span class=\"string\">&#x27;body&#x27;</span>).css(<span class=\"string\">&#x27;background&#x27;</span>, <span class=\"string\">&#x27;red&#x27;</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">window</span>.module = &#123;</span><br><span class=\"line\">    setData,</span><br><span class=\"line\">    getData,</span><br><span class=\"line\">    changeColor</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;)(<span class=\"built_in\">window</span>, jQuery)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.changeColor()</span><br></pre></td></tr></table></figure>\n<p>æ¨¡å—äº’ç›¸ç‹¬ç«‹ï¼Œæ¨¡å—ä¹Ÿå¯ä»¥å¼•è¿›å¦å¤–ä¸€ä¸ªæ¨¡å—ï¼Œä¾èµ–å…³ç³»æ¸…æ™°</p>\n<p><strong>ç¼ºç‚¹ï¼š</strong> å¼•å…¥å…¶ä»–æ¨¡å—æˆ–è€…ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œè¦æ³¨æ„å¼•å…¥çš„å…ˆåé¡ºåº</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// html æ–‡ä»¶æŒ‰é¡ºåºå¼•å…¥</span></span><br><span class=\"line\">&lt;script type=<span class=\"string\">&quot;text/javascript&quot;</span> src=<span class=\"string\">&quot;jquery-1.10.1.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;module.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"javascript\"></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">  <span class=\"built_in\">module</span>.changeColor()</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<h2 id=\"å‰ç«¯ç°ä»£æ¨¡å—åŒ–\">å‰ç«¯ç°ä»£æ¨¡å—åŒ–<a title=\"#å‰ç«¯ç°ä»£æ¨¡å—åŒ–\" href=\"#å‰ç«¯ç°ä»£æ¨¡å—åŒ–\"></a></h2>\n<hr>\n<p>å‰ç«¯ç›®å‰æ¨¡å—åŒ–è§„èŒƒï¼šCommonJSã€AMDã€CMDã€ES6 æ¨¡å—åŒ–</p>\n<h3 id=\"commonjs\">CommonJS<a title=\"#commonjs\" href=\"#commonjs\"></a></h3>\n<p>ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæ¨¡å—é—´æ•°æ®äº’ç›¸ç‹¬ç«‹ã€‚</p>\n<p>åœ¨æœåŠ¡å™¨ç«¯ï¼Œè¿è¡Œæ—¶åŒæ­¥åŠ è½½æ¨¡å—ï¼›æµè§ˆå™¨ç«¯ï¼Œæ¨¡å—éœ€ç¼–è¯‘å¤„ç†ã€‚</p>\n<p>å››ä¸ªé‡è¦å¯¹è±¡ï¼š</p>\n<ul>\n<li>module</li>\n</ul>\n<p>æ¯ä¸ªæ¨¡å—å†…éƒ¨éƒ½æœ‰ä¸€ä¸ª module å¯¹è±¡</p>\n<blockquote>\n<p><a href=\"http://module.id\">module.id</a> æ¨¡å—çš„è¯†åˆ«ç¬¦ï¼Œé€šå¸¸æ˜¯å¸¦æœ‰ç»å¯¹è·¯å¾„çš„æ¨¡å—æ–‡ä»¶åã€‚ module.filename æ¨¡å—çš„æ–‡ä»¶åï¼Œå¸¦æœ‰ç»å¯¹è·¯å¾„ã€‚module.loaded è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ¨¡å—æ˜¯å¦å·²ç»å®ŒæˆåŠ è½½ã€‚<br>\nmodule.parent è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºè°ƒç”¨è¯¥æ¨¡å—çš„æ¨¡å—ã€‚<br>\nmodule.children è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºè¯¥æ¨¡å—è¦ç”¨åˆ°çš„å…¶ä»–æ¨¡å—ã€‚module.exports è¡¨ç¤ºæ¨¡å—å¯¹å¤–è¾“å‡ºçš„å€¼ã€‚</p>\n</blockquote>\n<ul>\n<li>exports</li>\n</ul>\n<p>exports æ˜¯ <code>module.exports</code> çš„å¼•ç”¨ï¼ŒæŒ‡å‘ module å¯¹è±¡ä¸‹çš„å±æ€§ exportsï¼Œç›¸å½“äº</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"built_in\">exports</span> = <span class=\"built_in\">module</span>.exports;</span><br></pre></td></tr></table></figure>\n<p>é¿å…ä»¥ä¸‹å¼•èµ· exports ç›´æ¥å¤åˆ¶ï¼Œåˆ‡æ–­äº†ä¸ module.exports çš„è”ç³»</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">exports</span>.hello = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">&quot;hello&quot;</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"string\">&quot;Hello world&quot;</span>;</span><br></pre></td></tr></table></figure>\n<p><strong>æ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨ exportsï¼Œè€Œå»ºè®®ä½¿ç”¨ module.exports å¯¼å‡ºæ¨¡å—ã€‚</strong></p>\n<ul>\n<li>require</li>\n</ul>\n<blockquote>\n<p>ç”¨äºåŠ è½½ module.exports çš„æ¨¡å—</p>\n</blockquote>\n<ul>\n<li>global</li>\n</ul>\n<blockquote>\n<p>æ‰€æœ‰æ¨¡å—éƒ½èƒ½è®¿é—®åˆ° global å¯¹è±¡</p>\n</blockquote>\n<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> Node.jsã€å°ç¨‹åºã€æµè§ˆå™¨ï¼ˆBrowserifyï¼‰</p>\n<p><strong>ç‰¹ç‚¹ï¼š</strong></p>\n<ul>\n<li>è¿è¡Œæ—¶åŠ è½½ï¼Œå¹¶ä¸”ç¬¬ä¸€æ¬¡åŠ è½½æ¨¡å—åä¼šè¢«ç¼“å­˜</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;./example.js&quot;</span>); <span class=\"comment\">// ç¨‹åºæ‰§è¡Œåˆ°è¿™é‡Œå¼€å§‹åŠ è½½ï¼Œå¹¶ä¸”ç¼“å­˜åˆ° require.cache å¯¹è±¡</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;./example.js&quot;</span>).message = <span class=\"string\">&quot;hello&quot;</span>;</span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;./example.js&quot;</span>).message;</span><br></pre></td></tr></table></figure>\n<p>ç¨‹åºæ‰§è¡Œåˆ°è¿™é‡Œå¼€å§‹åŠ è½½ï¼Œå¹¶ä¸”ç¼“å­˜åˆ° <code>require.cache</code> å¯¹è±¡ï¼Œæ‰€æœ‰çš„æ¨¡å—ç¼“å­˜éƒ½åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ã€‚</p>\n<ul>\n<li>åŒæ­¥åŠ è½½æ¨¡å—</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./a&quot;</span>); <span class=\"comment\">// æ‰§è¡Œåˆ°æ­¤å¤„æ—¶ï¼Œa.js æ‰åŒæ­¥ä¸‹è½½å¹¶æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure>\n<p>åœ¨æµè§ˆå™¨ä¸­å¯ä»¥ä½¿ç”¨ browserify å®ç°ï¼Œç”±äº CommonJS åŒæ­¥åŠ è½½çš„æ–¹å¼ï¼Œè€ŒåŒæ­¥æ„å‘³ç€é˜»å¡åŠ è½½ï¼Œæ‰€ä»¥åœ¨æµè§ˆå™¨ç¯å¢ƒå¹¶ä¸é€‚ç”¨ï¼›è€ŒæœåŠ¡å™¨æ–‡ä»¶éƒ½åœ¨åœ¨æœ¬åœ°ï¼ŒåŠ è½½é€Ÿåº¦å¿«ï¼ŒCommonJS æ˜¯é€‚ç”¨çš„ã€‚</p>\n<p><strong>ä¸¾ä¸€ä¸ªæ —å­ ğŸŒ°ï¼š</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å®šä¹‰æ¨¡å—math.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> basicNum = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> a + b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">//åœ¨è¿™é‡Œå†™ä¸Šéœ€è¦å‘å¤–æš´éœ²çš„å‡½æ•°ã€å˜é‡</span></span><br><span class=\"line\">  <span class=\"attr\">add</span>: add,</span><br><span class=\"line\">  <span class=\"attr\">basicNum</span>: basicNum,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼•ç”¨è‡ªå®šä¹‰çš„æ¨¡å—æ—¶ï¼Œå‚æ•°åŒ…å«è·¯å¾„ï¼Œå¯çœç•¥.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> math = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./math&#x27;</span>);</span><br><span class=\"line\">math.add(<span class=\"number\">2</span>, <span class=\"number\">5</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å¼•ç”¨æ ¸å¿ƒæ¨¡å—æ—¶ï¼Œä¸éœ€è¦å¸¦è·¯å¾„</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;http&#x27;</span>);</span><br><span class=\"line\">http.createService(...).listen(<span class=\"number\">3000</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"amd-å’Œ-require.js\">AMD å’Œ require.js<a title=\"#amd-å’Œ-require.js\" href=\"#amd-å’Œ-require.js\"></a></h3>\n<p>ç”±äº CommonJS çš„åŒæ­¥åŠ è½½çš„æœºåˆ¶å¹¶ä¸é€‚ç”¨äºæµè§ˆå™¨ï¼Œä»è€Œå‡ºç°äº† AMD å¼‚æ­¥åŠ è½½çš„æ¨¡å—åŒ–è§„èŒƒã€‚ç”¨äºæµè§ˆå™¨ require.jsï¼Œæ˜¯ AMD è§„èŒƒçš„å®ç°ã€‚</p>\n<ul>\n<li>å®šä¹‰æš´éœ²æ¨¡å—</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//å®šä¹‰æ²¡æœ‰ä¾èµ–çš„æ¨¡å—</span></span><br><span class=\"line\">define(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> æ¨¡å—;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//å®šä¹‰æœ‰ä¾èµ–çš„æ¨¡å—</span></span><br><span class=\"line\">define([<span class=\"string\">&quot;module1&quot;</span>, <span class=\"string\">&quot;module2&quot;</span>], <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">m1, m2</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> æ¨¡å—;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>å¼•å…¥ä½¿ç”¨æ¨¡å—</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">require</span>([<span class=\"string\">&quot;module1&quot;</span>, <span class=\"string\">&quot;module2&quot;</span>], <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">m1, m2</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ä½¿ç”¨m1/m2</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> æµè§ˆå™¨</p>\n<p><strong>ç‰¹ç‚¹ï¼š</strong></p>\n<ul>\n<li>å¼‚æ­¥åŠ è½½ï¼Œæå‰æ‰§è¡Œä¾èµ–</li>\n</ul>\n","prev":{"title":"ğŸ‘‹ğŸ»Goodbye 2021","link":"2022/01/03/flags-2"},"next":{"title":"ğŸ­Flags for 2021","link":"2021/10/27/flags-1"},"plink":"https://imunoko.top/2021/12/27/engineering-1/","toc":[{"id":"å‰ç«¯æ¨¡å—åŒ–çš„æ¼”å˜","title":"å‰ç«¯æ¨¡å—åŒ–çš„æ¼”å˜","index":"1","children":[{"id":"1.-å…¨å±€çš„-function-æ¨¡å¼","title":"1. å…¨å±€çš„ function æ¨¡å¼","index":"1.1"},{"id":"2.-å‘½åç©ºé—´ï¼ˆnamespaceï¼‰æ¨¡å¼","title":"2. å‘½åç©ºé—´ï¼ˆnamespaceï¼‰æ¨¡å¼","index":"1.2"},{"id":"3.-è‡ªæ‰§è¡Œå‡½æ•°ï¼ˆiifeï¼‰å’Œé—­åŒ…","title":"3. è‡ªæ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰å’Œé—­åŒ…","index":"1.3"},{"id":"4.-iife-å¢å¼ºç‰ˆ-â€”â€”-ç°ä»£æ¨¡å—åŒ–çš„åŸºç¡€","title":"4. IIFE å¢å¼ºç‰ˆ â€”â€” ç°ä»£æ¨¡å—åŒ–çš„åŸºç¡€","index":"1.4"}]},{"id":"å‰ç«¯ç°ä»£æ¨¡å—åŒ–","title":"å‰ç«¯ç°ä»£æ¨¡å—åŒ–","index":"2","children":[{"id":"commonjs","title":"CommonJS","index":"2.1"},{"id":"amd-å’Œ-require.js","title":"AMD å’Œ require.js","index":"2.2"}]}],"copyright":{"license":"è‡ªç”±è½¬è½½-éå•†ç”¨-ç¦æ­¢æ¼”ç»-ä¿æŒç½²å (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","author":"imunoko"},"reading_time":"1218 words in 6 min"}